define("tooltip",["node","utils"],function(t,o,e){function i(t,o){this.setTrigger(t),this.setConf(o),this.setRef(),this.status="hidden",this.init(),i._tables.push(this)}function n(t,o,e){var i,n,s=t.getDOMNode(),p=s.offsetHeight,a=s.offsetWidth,d=null;if(e.standalone)d={height:o.offsetHeight,width:o.offsetWidth,left:o.offsetLeft,top:o.offsetTop};else{var h=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,r=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft;d=o.getBoundingClientRect(),d.top+=h,d.left+=r,t.$arrow.replaceClass([l.top,l.bottom,l.left,l.right].join(" "),l[e.placement])}switch(e.placement){case"bottom":i=d.left+(d.width-a)/2,n=d.top+d.height;break;case"left":i=d.left-d.width,n=d.top+(d.height-p)/2;break;case"right":i=d.left+d.width,n=d.top+(d.height-p)/2}t.css({left:i+"px",top:n+"px"})}var s=t("node"),p=t("utils"),a={placement:"bottom",triggerType:"mouse",zIndex:"1000",standalone:!1},l={top:"tooltip__arrow--top",left:"tooltip__arrow--left",bottom:"tooltip__arrow--bottom",right:"tooltip__arrow--right"};return i._tables=[],i.buildTooltipNode=function(t){if(t=p.merge({},a,t),!t.standalone)return i.$tooltip;var o=s("<div>").addClass("tooltip-container"),e=s("<div>").addClass("tooltip__arrow").addClass(l[t.placement]),n=s("<div>").addClass("tooltip__content");return o.append(e).append(n),o.$content=n,o.$arrow=e,o},i.$tooltip=i.buildTooltipNode({standalone:!0}),document.body.appendChild(i.$tooltip.getDOMNode()),i.init=function(t){var o=s('[data-type="tooltip"]');p.each(o,function(t){new i(t)})},i.prototype.init=function(){var t=this,o=this.conf,e=this.$trigger,n=(this.$tooltip=i.buildTooltipNode(o),o.content);o.standalone&&(this.setContent(n),this.$ref.parent().append(this.$tooltip.getDOMNode()),this.pos()),"mouse"===o.triggerType?(e.on("mouseover",function(){t.show()}),e.on("mouseout",function(){t.hide()})):e.on("click",function(){t.toggle()})},i.prototype.pos=function(){n(this.$tooltip,this.$ref.getDOMNode(),this.conf)},i.prototype.setConf=function(t){var o=this.$trigger,e=o.attr("data-placement"),i=o.attr("data-content"),n=o.attr("data-standalone");t=t||{},e&&(t.placement=e),i&&(t.content=i),n&&(t.standalone=!!n),this.conf=t=p.merge({},a,t)},i.prototype.setTrigger=function(t){this.$trigger=s(t)},i.prototype.setRef=function(t){this.$ref=t?s(t):this.$trigger},i.prototype.setContent=function(t){this.$tooltip.$content.html(t),this.conf=p.merge(this.conf,{content:t})},i.prototype.show=function(){this.conf.standalone||(this.setContent(this.conf.content),this.pos()),this.status="shown",this.$tooltip.css({opacity:"1","z-index":this.conf.zIndex})},i.prototype.hide=function(){this.status="hidden",this.$tooltip.css({opacity:"0","z-index":"-"+this.conf.zIndex})},i.prototype.toggle=function(){"hidden"===this.status?this.show():this.hide()},i.show=function(t,o,e){var s=i.$tooltip;e=e||a,s.$content.html(o),n(s,t,e),s.css({opacity:"1","z-index":e.zIndex})},i.hide=function(){i.$tooltip.css({opacity:"0","z-index":"-"+a.zIndex})},window.Ecpkn.Tooltip=i,i});