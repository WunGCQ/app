define("tooltip",["node","util"],function(t,o,e){function i(t,o){this.setTrigger(t),this.setConf(o),this.setRef(),this.status="hidden",this.init(),i._tables.push(this)}var n=t("node"),s=t("util"),p={placement:"bottom",triggerType:"mouse",standalone:!1},a={top:"tooltip__arrow--top",left:"tooltip__arrow--left",bottom:"tooltip__arrow--bottom",right:"tooltip__arrow--right"};return i._tables=[],i.buildTooltipNode=function(t){if(t=s.merge({},p,t),!t.standalone)return i.$tooltip;var o=n("<div>").addClass("tooltip-container"),e=n("<div>").addClass("tooltip__arrow").addClass(a[t.placement]),l=n("<div>").addClass("tooltip__content");return o.append(e).append(l),o.$content=l,o.$arrow=e,o},i.$tooltip=i.buildTooltipNode({standalone:!0}),document.body.appendChild(i.$tooltip.getDOMNode()),i.init=function(t){var o=n('[data-type="tooltip"]');s.each(o,function(t){new i(t)})},i.prototype.init=function(){var t=this,o=this.conf,e=this.$trigger,n=(this.$tooltip=i.buildTooltipNode(o),o.content);o.standalone&&(this.setContent(n),this.$ref.parent().append(this.$tooltip.getDOMNode()),this.pos()),"mouse"===o.triggerType?(e.on("mouseover",function(){t.show()}),e.on("mouseout",function(){t.hide()})):e.on("click",function(){t.toggle()})},i.prototype.pos=function(){var t,o,e=this.conf,i=this.$ref,n=i.getDOMNode(),s=this.$tooltip,p=s.getDOMNode(),l=p.offsetHeight,r=p.offsetWidth,d=null;if(e.standalone)d={height:n.offsetHeight,width:n.offsetWidth,left:n.offsetLeft,top:n.offsetTop};else{var h=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,c=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft;d=n.getBoundingClientRect(),d.top+=h,d.left+=c,s.$arrow.replaceClass([a.top,a.bottom,a.left,a.right].join(" "),a[e.placement])}switch(e.placement){case"bottom":t=d.left+(d.width-r)/2,o=d.top+d.height;break;case"right":t=d.left+d.width,o=d.top+(d.height-l)/2}s.css({left:t+"px",top:o+"px"})},i.prototype.setConf=function(t){var o=this.$trigger,e=o.attr("data-placement"),i=o.attr("data-content"),n=o.attr("data-standalone");t=t||{},e&&(t.placement=e),i&&(t.content=i),n&&(t.standalone=!!n),this.conf=t=s.merge({},p,t)},i.prototype.setTrigger=function(t){this.$trigger=n(t)},i.prototype.setRef=function(t){this.$ref=t?n(t):this.$trigger},i.prototype.setContent=function(t){this.$tooltip.$content.html(t),this.conf=s.merge(this.conf,{content:t})},i.prototype.show=function(){this.conf.standalone||(this.setContent(this.conf.content),this.pos()),this.status="shown",this.$tooltip.css("opacity","1")},i.prototype.hide=function(){this.status="hidden",this.$tooltip.css("opacity","0")},i.prototype.toggle=function(){"hidden"===this.status?this.show():this.hide()},i});